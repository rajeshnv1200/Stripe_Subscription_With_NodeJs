<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product and Subscription Page</title>
  <link rel="stylesheet" href="/style.css">
  <!-- Font Awesome for icons -->
  <script src="https://kit.fontawesome.com/a076d05399.js"></script>
</head>
<body>
  <!-- Top Navigation Bar -->
  <header>
    <nav class="navbar">
      <div class="navbar-container">
        <a href="/" class="navbar-logo">MyShop</a>
        <div class="navbar-right">
          <input type="text" class="search-bar" placeholder="Search products...">
          <a href="/login" class="nav-link">Login</a>
          <a href="/cart" class="nav-link">
            <i class="fa fa-shopping-cart" aria-hidden="true"></i>
            Cart
          </a>
        </div>
      </div>
    </nav>
  </header>

  <!-- Main Container -->
  <div class="main-container">
    <!-- Sidebar Menu -->
    <aside class="sidebar">
      <ul class="sidebar-menu">
        <li><a href="/">Home</a></li>
        <li><a href="/products">Products</a></li>
        <li><a href="/about">About Us</a></li>
        <li><a href="/contact">Contact</a></li>
      </ul>
    </aside>

    <!-- Product Grid -->
    <main class="content">
      <!-- Product Section -->
      <div class="product-section">
        <h2>Our Products</h2>
        <div class="product-grid">
          <% products.forEach(product => { %>
            <div class="product-card">
              <img src="<%= product.imageUrl %>" alt="<%= product.name %>" class="product-image">
              <div class="content">
                <h2><%= product.name %></h2>
                <p><%= product.description %></p>
                <div class="price">$<%= product.price.unit_amount / 100 %> <%= product.price.currency.toUpperCase() %></div>
                <a href="/checkout/<%= product.price.id %>" class="button">Buy Now</a> 
                <a href="/create-subscription/<%= product.price.id %>" class="button">Subscription</a>                 
              </div>
            </div>
          <% }); %>
        </div>
      </div>

      <!-- Subscription Form Section -->
      <div class="subscription-section">
        <h2>Subscribe to Our Service</h2>
        <form action="/create-subscription" method="POST">
          <label for="customerEmail">Email:</label>
          <input type="email" id="customerEmail" name="customerEmail" required>
          <br>
          <label for="paymentMethodId">Payment Method ID:</label>
          <input type="text" id="paymentMethodId" name="paymentMethodId" required>
          <br>
          <button type="submit" class="button">Subscribe</button>
        </form>
      </div>
    </main>
  </div>

  <!-- Footer -->
  <footer>
    <p>&copy; 2024 MyShop. All rights reserved.</p>
  </footer>
</body>
</html>
